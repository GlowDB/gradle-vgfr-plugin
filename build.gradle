group = 'tane.mahuta.build'

buildscript {
    repositories {
        jcenter()
        maven { url "https://plugins.gradle.org/m2/" }
        maven { url 'https://oss.sonatype.org/content/repositories/snapshots' }
    }
    dependencies {
        classpath 'com.palantir:jacoco-coverage:0.4.0'
    }
}

repositories {
    jcenter()
    mavenCentral()
}

apply plugin: 'com.palantir.jacoco-full-report'


subprojects {

    buildscript.repositories.addAll(rootProject.buildscript.repositories)
    repositories.addAll(buildscript.repositories)

    buildscript {
        dependencies {
            classpath 'com.gradle.publish:plugin-publish-plugin:0.9.7'
            classpath 'io.franzbecker:gradle-lombok:1.8'
        }
    }

    group = rootProject.group
    version = rootProject.version
}

tasks.jacocoFullReport.dependsOn subprojects.collect{ tasks.withType(JacocoReport) }.findAll{ it != null && it != tasks.jacocoFullReport }
